var e,t,s,i=Object.defineProperty,a=("undefined"!=typeof require&&require,(e,t,s)=>(((e,t,s)=>{t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(e,"symbol"!=typeof t?t+"":t,s),s)),n=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)},r=(e,t,s)=>(n(e,t,"read from private field"),s?s.call(e):t.get(e)),o=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},l=(e,t,s,i)=>(n(e,t,"write to private field"),i?i.call(e,s):t.set(e,s),s);export function __vite_legacy_guard(){import("data:text/javascript,")}import{F as c,P as d,T as p,I as m,C as u,R as g,S as h,a as f,b as v,c as b,$ as y,o as k,d as S,L as w,e as I}from"./vendor.f3ceb474.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}(),c.use([d,p,m,u,g,h,f,v,b]);const C={},T=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`${e}`)in C)return;C[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script",i.crossOrigin=""),i.href=e,document.head.appendChild(i),t?new Promise(((e,t)=>{i.addEventListener("load",e),i.addEventListener("error",t)})):void 0}))).then((()=>e())):e()};var _={ONBOARDING:{TITLE:"B√ºrgerbus Bad Bevensen",CONTINUE:"Weiter",SLIDES:[{title:"B√ºrgerbus Bad Bevensen",image:"images/onboarding-intro.png",text:"Ziel des Vereins ist die Verbesserung des √∂ffentlichen Personen-Nahverkehrs in Bad Bevensen, um besonders den √§lteren und den in der Mobilit√§t eingeschr√§nkten B√ºrgern die M√∂glichkeit zu geben, aus den Wohngebieten in die Innenstadt, zu Gesch√§ften und √Ñrzten zu kommen. Unser barrierefreier elektrischer Kleinbus, wird von ehrenamtlichen B√ºrgerinnen und B√ºrgern gefahren.\n\n            Der Fahrbetrieb wurde im M√§rz 2021 aufgenommen."},{title:"Steigt doch einfach mal ein!",image:"images/onboarding-2.jpg",text:"Frisch gewaschen im Januar dank einiger fleissiger Helfer: unser Elektrobus von der Firma K-Bus auf Basis eines NISSAN eNV 200"}]},HOME:{TITLE:"B√ºrgerbus Bad Bevensen",SUBTITLE:"Steigt doch einfach mal ein!",BUTTONS:[{title:"Fahrplan",image:"images/home-fahrplan.png",link:"https://www.bad-bevensen.de/leben-in-bad-bevensen/verkehr-und-mobilitaet/buergerbus/"},{title:"Fahrpreise",image:"images/home-fahrpreise.png",link:"https://www.bad-bevensen.de/leben-in-bad-bevensen/verkehr-und-mobilitaet/buergerbus/"},{title:"Fahrzeug",image:"images/home-fahrzeug.png",link:"https://www.bad-bevensen.de/leben-in-bad-bevensen/verkehr-und-mobilitaet/buergerbus/"},{title:"Fahrer werden",image:"images/home-fahrer.png",link:"https://www.bad-bevensen.de/leben-in-bad-bevensen/verkehr-und-mobilitaet/buergerbus/"}]},CATEGORIES:[{id:7072,title:"Linie 7072"},{id:7073,title:"Linie 7073"}]};function B(e){const{items:t,loadItem:s,localPrice:i,getStop:a,stops:n}=e;console.log("StopCards",{items:t,loadItem:s,localPrice:i,getStop:a,stops:n});const r=(e="")=>{return`data:image/svg+xml;base64,${t=`<svg xmlns="http://www.w3.org/2000/svg" width="144" height="144" viewBox="0 0 144 144">\n    <circle cx="72" cy="72" r="72" fill="#FF35C6"/>\n    <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="24" fill="#fff">${e}</text>\n    </svg>`,btoa(unescape(encodeURIComponent(t)))}`;var t};return()=>y("div",{class:"dings"},y("div",{class:"block item-cards"},(t.value||t).map(((e,t)=>{var n;return y("a",{href:"#",onClick:()=>s(e),class:"item-card",key:e.id},y("div",{class:"item-card-image"},y("img",{src:e.image,onLoad:e=>e.target.classList.add("loaded")})),y("div",{class:"item-card-title"},null==(n=a(t))?void 0:n.id," - ",e.title),y("div",{class:"item-card-price"},i(e.price,"IC")))}))),y("div",{class:"block item-cards"},n.value.map(((e,t)=>{var i,a;return y("a",{href:"#",onClick:()=>s(e),class:"item-card",key:e.id},y("div",{class:"item-card-image"},y("img",{src:r(null==(i=e.tags)?void 0:i.name),onLoad:e=>e.target.classList.add("loaded")})),y("div",{class:"item-card-title"},e.id," - ",null==(a=e.tags)?void 0:a.name),y("div",{class:"item-card-price"},"0"))}))))}function E(e){const{items:t,loadItem:s,localPrice:i,getStop:a,stops:n}=e;console.log("ItemCards",{items:t,loadItem:s,localPrice:i,getStop:a,stops:n});return()=>y("div",{class:"block item-cards"},n.value.map(((e,t)=>{var i,a;return y("a",{href:"#",onClick:()=>s(e),class:"item-card",id:e.id,key:1e3*t},y("div",{class:"item-card-image schild_224_h"},y("img",{src:"assets/schild_placeholder.843c9449.png",onLoad:e=>e.target.classList.add("loaded")}),y("div",{class:"item-card-overlay-title"},y("p",null,null==(i=e.tags)?void 0:i.name),y("div",{class:"item-card-stoptags"},(e=>{var t,s;return(null==(s=null==(t=e.tags)?void 0:t.route_ref)?void 0:s.split(";").map((e=>e.trim())))||[]})(e).map((e=>y("span",null,e)))))),y("div",{class:"item-card-title"},e.id," - ",null==(a=e.tags)?void 0:a.name),y("div",{class:"item-card-price"},(e=>e.tags?"E"==e.tags.direction?"Stadteinw√§rts":"W"==e.tags.direction?"Stadtausw√§rts":"":"")(e)))})))}function O(e){const{items:t,loadItem:s}=e;return()=>y("div",{class:"block big-cards"},(t.value||t).map((e=>y("a",{href:"#",onClick:()=>s(e),class:"item-card big-card topic-card",key:e.id},y("div",{class:"card-header"},y("div",{class:"topic-title"},e.title),y("div",{class:"topic-subitle"},((e,t,s=!1)=>{let i="";const a="de-DE";return s?new Date(e.getTime()+Math.random()*(t.getTime()-e.getTime())).toLocaleDateString(a):(i=new Date(e.getTime()+Math.random()*(t.getTime()-e.getTime())).toLocaleString(a),i.substring(0,i.lastIndexOf(":")))})(new Date(2012,0,1),new Date,!0)))))))}var D="assets/logo.306e271e.svg",M="assets/logo_dark.f96bc666.svg";const F=[{id:1,title:"Willkommen im alten Cohrs",description:"Kleine, feine Weinstube mit Flammkuchen- Spezialit√§ten und Rothaus Bier vom Fass aus Baden.\nLorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",ingredients:["Bier","Andy","Benti","holla"],image:"images/cohrs/1b.jpg",categoryId:1},{id:2,title:"√ñffnungszeiten",description:'Ist das heute nicht das perfekte Wetter f√ºr ein k√ºhles Bier oder einen leckeren Wein im Zum alten Cohrs - Bad Bevensen"? \n            Wir finden schon und freuen uns jetzt schon auf euren Besuch.\n            \n            ',image:"images/cohrs/2b.jpg",categoryId:1,more:"<p>Freitag & Samstag\n        17.00 - 22.00 Uhr <br />\n        Es gibt <b>Flammkuchen</b>\n        (K√ºche von 17.30-21.30 Uhr)\n       </p>\n       <p>\n        Sonntag \n        12.00 - 17.00 Uhr\n        mit Kleinigkeiten aus der kalten K√ºche\n        </p>\n        <p>\n        Montag bis Donnerstag geschlossen (Ruhetage)\n        </p>\n        ",moretext:"Freitag & Samstag\n        17.00 - 22.00 Uhr\n        Es gibt Flammkuchen\n        (K√ºche von 17.30-21.30 Uhr)\n\n        Sonntag \n        12.00 - 17.00 Uhr\n        mit Kleinigkeiten aus der kalten K√ºche\n\n        Montag bis Donnerstag geschlossen (Ruhetage)\n        \n        "},{id:3,title:"SCHICKI-MICKI-WEIHNACHTS-FR√úHST√úCKSBOX F√úR 2",image:"https://test.smm.io/cohrs/wp-content/uploads/2021/12/264669031_4574735125987441_2853006897570650630_n.jpg",description:'Weihnachten üéÑüéÖüéÑkommt immer so pl√∂tzlich üòâ‚Ä¶\n\nnach dem gro√üen Erfolg am Muttertag zaubern wir f√ºr euch am 1. und 2. Weihnachtstag wieder unsere reichhaltige Fr√ºhst√ºcksbox f√ºr zuhause. \nIhr m√ºsst nur noch Kaffee kochen und den Tisch decken, der Rest kommt von uns ‚ù§Ô∏è\n\nSCHICKI-MICKI-WEIHNACHTS-FR√úHST√úCKSBOX F√úR 2 zum Mitnehmen, auf Vorbestellung ‚ù§Ô∏è\n\n<img src="https://test.smm.io/cohrs/wp-content/uploads/2021/12/251583117_4444423402351948_4142066822013557943_n.jpg" alt="" width="1276" height="1729" class="alignnone size-full wp-image-256" />\n\n<img src="https://test.smm.io/cohrs/wp-content/uploads/2021/12/264669031_4574735125987441_2853006897570650630_n.jpg" alt="Schicki-Micki-Weihnachtsfr√ºhst√ºck 2021" width="1472" height="2048" class="alignnone size-full wp-image-254" />',ingredients:["Weihnachten","Fr√ºhst√ºck"],categoryId:1}];function L(e,t,s,i){var a=x(s-e),n=x(i-t),r=Math.sin(a/2)*Math.sin(a/2)+Math.cos(x(e))*Math.cos(x(s))*Math.sin(n/2)*Math.sin(n/2);return 6371e3*(2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)))}function x(e){return e*(Math.PI/180)}class P{constructor(i){a(this,"useOverpass",!0),a(this,"stopsObj",{}),o(this,e,[]),o(this,t,[]),o(this,s,null),this.isOSMData(i)?(this.osmdata=i,this.processData(i)):this.osmdata=null,"string"!=typeof i&&"number"!=typeof i||(this.trackId=i,this.overpassQuery=""),(null==i?void 0:i.id)&&(this.trackId=i.id,this.overpassQuery=i.overpassQuery),this.trackId,this.overpassQuery||(this.useOverpass=!1)}isOSMData(e){var t;return!!e&&(e.hasOwnProperty("generator")&&(null==(t=e.elements)?void 0:t.length)>0)}setLocation(e){return l(this,s,e),console.log("position:",e),this.getDistanceBetweenStops(),this.getDistanceToMe(),this}processData(s){console.log("bus stops:",this.getBusStops()),console.log("bus stop names:",this.getBusStopNames()),l(this,e,this.getRelationOfType("stop")),r(this,e).filter((e=>!e.tags.route_ref)).forEach((e=>e.tags.route_ref=this.route_ref)),l(this,t,this.getRelationOfType("platform")),this.stopsArr=this.toObject(r(this,e)),this.platformsArr=this.toObject(r(this,t)),console.log("stops:",this.stops,this.stopsArr),console.log("platforms:",this.platforms,this.platformsArr)}getRoute_ref(){var e;const t=this.getRelation();return(null==(e=null==t?void 0:t.tags)?void 0:e.ref)||""}getStops(){return r(this,e)}get elements(){return this.osmdata.elements}get stops(){const e=this.getRelationOfType("stop");return e.filter((e=>!e.tags.route_ref)).forEach((e=>e.tags.route_ref=this.route_ref)),e}get bus_stops(){return this.elements.filter((e=>{var t;return"bus_stop"==(null==(t=e.tags)?void 0:t.highway)}))}get platforms(){return this.elements.filter((e=>{var t;return"platform"==(null==(t=e.tags)?void 0:t.public_transport)}))}getGeoJSON(){return this.toGeoJSON}removePlatformFromStops(){const e=this.osmdata.elements.find((e=>"relation"==e.type));console.log("count members:",this.trackId,e.members.length);const t=e.members.filter((e=>"platform"!==e.role));return e.members=t,e.members}get toGeoJSON(){return k(this.osmdata)}toObject(e){return e.map((e=>{var t,s;return this.stopsObj[null==(t=e.tags)?void 0:t.name]=e,{[null==(s=e.tags)?void 0:s.name]:e}}))}async requestData(e){return fetch(e).then((e=>e.json())).catch(console.error).then((e=>e))}test(){return console.log("GEOJSON",this.geoJson),this.geoJson.features.filter((e=>{var t;return null==(t=e.properties)?void 0:t.name}))}async loadData(e){let t;return t=e||this.useOverpass?`https://overpass-api.de/api/interpreter?data=${this.overpassQuery}`:`https://api.openstreetmap.org/api/0.6/relation/${this.trackId}/full.json`,this.osmdata=await this.requestData(t),this.route_ref=this.getRoute_ref(),console.log("route_ref",this.route_ref,"osmdata",this.osmdata),this.geoJson=this.toGeoJSON,this.osmdata}getBusStops(){return this.elements.filter((e=>{var t;return"bus_stop"==(null==(t=e.tags)?void 0:t.highway)})).map((e=>{var t;return{[null==(t=e.tags)?void 0:t.name]:e}}))}getBusStopNames(){return this.elements.filter((e=>{var t;return"bus_stop"==(null==(t=e.tags)?void 0:t.highway)})).map((e=>{var t;return null==(t=e.tags)?void 0:t.name}))}getRelationOfType(e="stop"){return this.getRelationWithIdAndType(this.trackId,e)}getRelationWithIdAndType(e,t="stop"){const s=this.elements;return s.find((t=>"relation"==t.type&&t.id===e)).members.filter((e=>e.role==t)).map((e=>s.find((t=>t.id===e.ref))))}getRelation(){return this.elements.find((e=>"relation"==e.type&&e.id===this.trackId))}getStops(){return this.getRelationOfType("stop")}getPlatforms(){return this.getRelationOfType("platform")}getStopsData(){return this.getStops().map((e=>({name:e.tags.name,lat:e.lat,lon:e.lon,id:e.id})))}getPlatformsData(){return this.getPlatforms().map((e=>({name:e.tags.name,lat:e.lat,lon:e.lon,id:e.id})))}getDistanceBetweenStops(){const e=this.getStops(),t=[];for(let s=0;s<e.length-1;s++){const i=e[s],a=e[s+1],n=L(i.lat,i.lon,a.lat,a.lon);e[s].distance=n,t.push(n)}return t}getDistanceToMe(){const e=this.getStops(),t=[];for(let i=0;i<e.length;i++){const a=e[i],n=L(r(this,s).lat,r(this,s).lon,a.lat,a.lon);e[i].distanceToCurrent=n.toFixed(1),t.push(n)}return t}}e=new WeakMap,t=new WeakMap,s=new WeakMap;const j=[16165831,16864019],N={loadWP:(e="news")=>fetch(`https://bb.smm.io/bb/wp-json/wp/v2/${e}/?_embed`).then((e=>e.json())),load:()=>fetch("./blog/2021-05-31.txt").then((e=>e.text())),search:e=>fetch("./blog/2021-05-31.txt").then((e=>e.text()))},$=e=>e.featured_media>0?e._embedded["wp:featuredmedia"][0].source_url:"",W=S({state:{items:[{id:1,title:"Flammkuchen - herzhaft",description:"Schinken, K√§se und Zwiebeln.",ingredients:["Schinken","K√§se","Zwiebeln"],image:"images/catalog/1.jpg",price:1.6,categoryId:1},{id:2,title:"Flammkuchen - mit Spargel",description:"frischer deutscher Spargel, Katenrauchschinken, Zwiebeln, K√§se und Sauce Hollandaise.",ingredients:["Spargel","Schinken","Zwiebeln","K√§se"],image:"images/catalog/2.jpg",price:8.5,categoryId:1},{id:3,title:"Flammkuchen - Feinschmecker",description:"Fr√ºhlingszwiebeln, Lachs, K√§se und Zwiebeln.",ingredients:["Fr√ºhlingszwiebeln","Lachs","K√§se","Zwiebeln","Sauce Hollandaise"],image:"images/catalog/3.jpg",price:13.5,categoryId:1},{id:4,title:"Flammkuchen - vegetarisch",description:"Ruccola, Pesto, Strauchtomaten, Parmesan, Feta, Oliven, Zwiebeln und ger√∂stete Pinienkerne",ingredients:["Ruccola","Pesto","Strauchtomaten","Parmesan","Feta","Oliven","Zwiebeln","Pinienkerne"],image:"images/catalog/4.jpg",price:12.5,categoryId:1},{id:5,title:"Sch√ºmli",description:"Schweizer Milchkaffee-Zubereitung mit Vanille-Aroma.",ingredients:["Milch","Espresso","Vanille"],image:"images/catalog/5.jpg",categoryId:2,price:2.4},{id:6,title:"Cappuccino",description:"Italienischer Cappuccino, frisch gebr√ºht.",ingredients:["Milch","Espresso"],image:"images/catalog/6.jpg",categoryId:2,price:2.85},{id:7,title:"Milchkaffee",description:"Gesch√§umte Milch mit Kaffee-Aroma.",ingredients:["Milch","Espresso"],image:"images/catalog/7.jpg",categoryId:2,price:2.5},{id:8,title:"Hauswein",description:"Trockener Grauburgunder (Pinot Grigio) aus der Pfalz.",ingredients:[],image:"images/catalog/8.jpg",categoryId:3,price:3.1},{id:9,title:"Weinschorle",description:"Schorle nach Wahl.",ingredients:["Wein","Mineralwasser"],image:"images/catalog/9.jpg",categoryId:3,price:3.2},{id:10,title:"Cola",description:"Das Original... frisch gek√ºhlt.",ingredients:[],image:"images/catalog/10.jpg",categoryId:2,price:1.9}],categories:_.CATEGORIES,topics:[],topicType:"news",sticky:!1,filterCategoryId:"",favoriteItems:(R="favoriteItems",z=[],localStorage[R]?JSON.parse(localStorage[R]):z),cart:[],theme:localStorage.theme||"dark",images:F,showCart:!1,stops:[],stopInfo:[],stopContainer:{},routes:{},osmData:{},andy:{hasPayment:!1,texts:""}},getters:{stops:({state:e})=>e.stops,theme:({state:e})=>e.theme,currentTopic:({state:e})=>e.topics[0],topicType:({state:e})=>e.topicType,topicTypes:({state:e})=>[...new Set(e.topics.map((e=>e.type))),"Keine"],filteredTopics:({state:e})=>e.topicType?e.topics.filter((t=>e.topicType===t.type)):e.topics,filterCategoryId:({state:e})=>e.filterCategoryId,filteredItems:({state:e})=>e.filterCategoryId?e.items.filter((t=>t.categoryId===e.filterCategoryId)):e.items,favoriteItems:({state:e})=>e.favoriteItems,sortedStopNamess({state:e}){const t=[].concat(...Object.values(e.routes));return[...new Set(t.map((e=>e.tags.name)).sort())]},sortedStops({state:e}){console.log("sortedStops");const t=[].concat(...Object.values(e.routes)),s=[];return t.forEach((e=>{if(!s.some((t=>t.id===e.id))){s.push(e);t.filter((t=>t.id===e.id)).forEach((t=>{var s,i;null==(i=null==(s=t.tags)?void 0:s.trackId)||i.forEach((t=>{e.tags.trackId.includes(t)||e.tags.trackId.push(t)}))}))}})),console.log("******* uniqueStops",s.length,s),s.sort(((e,t)=>e.tags.name.localeCompare(t.tags.name))),s},filteredStops({state:e}){if(console.log("filteredStops",this,e.filterCategoryId),!e.filterCategoryId){const t=[].concat(...Object.values(e.routes)),s=[];return t.forEach((e=>{s.some((t=>t.id===e.id))||s.push(e)})),s.sort(((e,t)=>e.tags.name.localeCompare(t.tags.name))),s}return e.routes[e.filterCategoryId]},items:({state:e})=>e.items,images:({state:e})=>e.images,categories:({state:e})=>e.categories,topics:({state:e})=>e.topics,sticky:({state:e})=>e.sticky,showCart:({state:e})=>!0===e.showCart,cart:({state:e})=>e.cart,cartTotal({state:e}){let t=0;if(e.cart.forEach((e=>{t+=e.quantity*e.item.price})),t=String(t),t.split(".")[1]&&2!==t.split(".")[1].length){let e=t.split(".")[1].slice(0,2);1===e.length&&(e=`${e}0`),t=`${t.split(".")[0]}.${e}`}else t.split(".")[1]||(t=`${t}.00`);return t}},actions:{_setState({state:e},{key:t,value:s}){e[t]=s},getState:({state:e},t)=>e[t],setState({state:e},t){if(Array.isArray(t)){const[s,i]=t;return e[s]=i}"object"==typeof t&&Object.keys(t).forEach((s=>{e[s]=t[s]}))},setLayoutTheme({state:e},t){const s=document.querySelector("html").classList;s.remove("theme-dark","theme-light"),s.add(`theme-${t}`),e.theme=t||"dark",localStorage.setItem("theme",t)},addTopic({state:e},t){e.topics.push({id:e.topics.length+1,title:`From File ${e.topics.length}`,date:Date.now()-1e4,description:t,image:"images/cohrs/1.jpg"}),e.topics=[...e.topics]},addTopicFromWP({state:e},t){const s={id:t.id||e.topics.length+1,title:t.title.rendered,date:t.datum||t.date||"",description:t.content.rendered||"",image:$(t),type:t.type};!0===t.sticky?(e.sticky=s,e.topics.unshift(s)):e.topics.push(s),e.topics=[...e.topics]},addStopInfoFromWP({state:e},t){const s=e.stopInfo,i={id:t.id||s.length+1,osm_id:parseInt(t.osm_id)||-1,title:t.title.rendered,date:t.datum||t.date||"",description:t.content.rendered||"",image:$(t),type:t.type,jsn:t};!0===t.sticky?(e.sticky=i,s.unshift(i)):s.push(i),e.stopInfo=[...s]},setFilterCategoryId({state:e},t){e.filterCategoryId=t},emptyCart({state:e}){e.cart=[],localStorage.cart=JSON.stringify(e.cart)},updateCartQuanity({state:e},{quantity:t,obj:s}){s.quantity=t,0===t&&e.cart.splice(e.cart.indexOf(s),1),e.cart=[...e.cart],localStorage.cart=JSON.stringify(e.cart)},addToCart({state:e},{item:t}){const s=e.cart.filter((e=>e.item.id===t.id))[0];s?s.quantity+=1:e.cart.push({quantity:1,item:t}),e.cart=[...e.cart],localStorage.cart=JSON.stringify(e.cart)},addStops({state:e},t){e.stops=[...t]},addRoute({state:e},t){console.log("++++ addRoute",t.osmData);const s=t.osmData.stops.map((e=>(Array.isArray(e.tags.trackId)?e.tags.trackId.includes(t.osmData.trackId)||e.tags.trackId.push(t.osmData.trackId):e.tags.trackId=[t.osmData.trackId],e)));e.routes[t.osmData.route_ref]=s,e.osmData[t.osmData.route_ref]=t.osmData,e.stops=[...e.stops,...s],e.filterCategoryId=t.osmData.route_ref}}});var R,z;const A=()=>{N.loadWP("posts").then((e=>e.map((e=>(W.dispatch("addTopicFromWP",e),!0))))).then(N.loadWP("news").then((e=>e.map((e=>(W.dispatch("addTopicFromWP",e),!0))))).then(N.loadWP("stops").then((e=>e.map((e=>(e.featured_media>0&&console.log("wp:featuredmedia:",e._embedded["wp:featuredmedia"][0].source_url),W.dispatch("addStopInfoFromWP",e),!0)))))))};A(),window.test=A,window.store=W,window.xtest=()=>Promise.allSettled(j.map((e=>(async e=>{const t=new P(e);return await t.loadData(),t})(e)))).then((e=>{e.filter((e=>"fulfilled"===e.status)).forEach((e=>{const t=e.value,s=t.trackId;W.dispatch("addRoute",{id:s,osmData:t})}))})).catch((e=>{console.error(e)})),xtest();const K=e=>{if((e=String(e)).split(".")[1]&&2!==e.split(".")[1].length){let t=e.split(".")[1].slice(0,2);1===t.length&&(t=`${t}0`),e=`${e.split(".")[0]}.${t}`}else e.split(".")[1]||(e=`${e}.00`);return e};function U(e){return()=>y("a",{href:`/item/${e.item.id}/`,class:"item-card"},y("img",{class:"item-card-image",src:e.item.image}),y("div",{class:"item-card-content"},y("div",{class:"item-card-title"},e.item.title),e.item.subtitle&&y("div",{class:"item-card-subtitle"},e.item.subtitle),y("div",{class:"item-card-price"},y("span",null,"$"),K(e.item.prices?e.item.prices[0].value:e.item.price))))}const q=[{path:"/",component:function(e,t){const{$f7router:s,$store:i,$theme:a,$onMounted:n}=t,{showCart:r,cart:o,cartTotal:l,filteredItems:c,categories:d,filterCategoryId:p,images:m,topics:u,topicType:g,topicTypes:h,theme:f,sticky:v,stops:b,filteredStops:k,filteredTopics:S}=i.getters;let I=null,C=[],T=null,B={};window.bus_overlays=B;const F=()=>{W.dispatch("setLayoutTheme","light"===f.value?"dark":"light")},L=e=>{W.dispatch("setState",{filterCategoryId:e})},x=e=>{W.dispatch("setState",{topicType:e})},P=e=>{s.navigate(`/item/${e.id}/`,{props:{item:e}})},j=(e,t)=>(console.log("localPrice",e,t),"number"!=typeof e&&(e=Number(e)),e.toLocaleString("de-DE",{style:"currency",currency:"EUR"})),N=e=>b.value&&b.value.length>0&&e<b.value.length?b.value[e]:null;return p.onUpdated((e=>{const t=e?`${e}`:void 0,s=e=>{const{properties:t}=e;if(!t)return!1;const{uid:s,public_transport:i}=t;return"platform"!==i&&126298===s};if(console.log("filterCategoryId.onUpdated 1",C,t,typeof t,C.includes(t)),t&&!C.includes(t)){console.log("PUSHING",t,C),C.push(t);const e=i.state.osmData[t];console.log("+++++++++++++ filterCategoryId.onUpdated adding layercontrol",t,C,e);const a=e.toGeoJSON;a.features=a.features.filter(s),console.log("initMap::geojson",a,T);const n=w.geoJSON(a,{}),r=T.addOverlay(n,`Linie ${t}`);console.log("adding bus_overlays",t,n,r),B[`${t}`]=n}(e=>{console.log("switchBusLayer",e,B);for(let t in B)console.log("switchBusLayer",t,B[t]),I.removeLayer(B[t]);if(e&&B[e])B[e].addTo(I);else if(!e)for(let t in B)console.log("switchBusLayer",t,B[t]),B[t].addTo(I)})(t)})),n((()=>{console.log("onMounted",_),(()=>{const e=new w.tileLayer("http://tile.memomaps.de/tilegen/{z}/{x}/{y}.png",{minZoom:3,maxZoom:20,attribution:'Map data &copy; <a href="http://memomaps.de/">√ñPNV Karte</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>'}),t=w.tileLayer("https://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png",{maxZoom:20,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}),s=t,a=53.0805,n=10.58,r=14;I=w.map("map",{layers:[s]}).setView([a,n],r),window.$map=I;const o={"Stra√üenkarte":t,"√ñPNV":e};T=w.control.layers(o).addTo(I),window.layerControl=T,console.log("initMap::map",I,i.state.osmData)})()})),()=>y("div",{class:"page"},y("div",{class:"navbar navbar-transparent"},y("div",{class:"navbar-bg"}),y("div",{class:"navbar-inner"},y("div",{class:"title logo"},y("img",{src:"dark"===f.value?D:M,height:"14px",alt:"Zum Alten Cohrs",onClick:()=>F()})))),y("div",{class:"page-content"},y("div",{class:"page-title page-title-flex"},y("img",{class:"page-logo",src:"dark"===f.value?D:M,alt:"Zum Alten Cohrs"}),y("div",{class:"page-title-after",role:"button",tabIndex:"0",onClick:()=>F()},"dark"===f.value?y("i",{class:"icon f7-icons"},"sun_max_fill"):y("i",{class:"icon f7-icons"},"moon_fill"))),y("div",{class:"page-title page-subtitle"},_.HOME.SUBTITLE),y("div",{id:"map"}),v.value&&v.value.description&&y("div",{class:"block post inset sticky",innerHTML:v.value.description}),y("div",{class:"block block-filter"},y("a",{href:"#",class:"button button-round "+(null===g.value?"button-fill":""),onClick:()=>x(null)},"Alle"),h.value.map((e=>y("a",{href:"#",class:"button button-round "+(g.value===e?"button-fill":""),onClick:()=>x(e)},e)))),y(O,{"load-item":P,items:S}),y("div",{class:"block block-filter"},y("a",{href:"#",class:"button button-round "+(null===p.value?"button-fill":""),onClick:()=>L(null)},"Alle"),d.value.map((e=>y("a",{href:"#",class:"button button-round "+(p.value===e.id?"button-fill":""),onClick:()=>L(e.id)},e.title)))),y(E,{"load-item":P,items:c,"local-price":j,"get-stop":N,stops:k})))}},{path:"/item/:id/",popup:{asyncComponent:()=>T((()=>import("./item.f7.049816cb.js")),["assets/item.f7.049816cb.js","assets/item.f7.eb23a32a.css","assets/vendor.f3ceb474.js"]),swipeToClose:"to-bottom"}},{path:"/favorites/",component:(e,t)=>{const{$store:s}=t,{favoriteItems:i}=s.getters;return console.log("IN FAVORITES",i),()=>y("div",{class:"page"},y("div",{class:"navbar navbar-transparent"},y("div",{class:"navbar-bg"}),y("div",{class:"navbar-inner sliding"},y("div",{class:"title"},"Favorites"))),y("div",{class:"page-content"},y("div",{class:"page-title"},"Favorites"),i.value.length>0?y(B,null,i.value.map((e=>y(U,{key:e.id,item:e})))):y("div",{class:"block"},y("p",null,y("b",null,"You don't have any favorites yet")),y("p",null,"When viewing an item, press the favorite icon"," ",y("i",{class:"icon f7-icons ios-only text-color-primary"},"heart"),y("i",{class:"icon material-icons md-only text-color-primary"},"favorite_border")," ","to add it"))))}},{path:"/cart/",popup:{asyncComponent:()=>T((()=>import("./cart.f7.6b701a00.js")),["assets/cart.f7.6b701a00.js","assets/vendor.f3ceb474.js"]),swipeToClose:"to-bottom"}}];const V={TITLE:"B√ºrgerbus Bad Bevensen",CONTINUE:"Weiter",SLIDES:[{title:"B√ºrgerbus Bad Bevensen",image:"images/onboarding-intro.png",text:"Ziel des Vereins ist die Verbesserung des √∂ffentlichen Personen-Nahverkehrs in Bad Bevensen seit M√§rz 2021.",more:"Ziel des Vereins ist die Verbesserung des √∂ffentlichen Personen-Nahverkehrs in Bad Bevensen, um besonders den √§lteren und den in der Mobilit√§t eingeschr√§nkten B√ºrgern die M√∂glichkeit zu geben, aus den Wohngebieten in die Innenstadt, zu Gesch√§ften und √Ñrzten zu kommen. Unser barrierefreier elektrischer Kleinbus, wird von ehrenamtlichen B√ºrgerinnen und B√ºrgern gefahren.\n\n            Der Fahrbetrieb wurde im M√§rz 2021 aufgenommen."},{title:"Steigt doch einfach mal ein!",image:"images/onboarding-2.jpg",text:"Frisch gewaschen im Januar dank einiger fleissiger Helfer: unser Elektrobus von der Firma K-Bus auf Basis eines NISSAN eNV 200"}]};function Z(e,{$f7:t,$el:s,$onMounted:i,$onBeforeUnmount:a}){const n=!localStorage.onboardingFinished;let r,o;const l=()=>{r&&r.destroy()};i((()=>{n&&(o=t.popup.create({el:s.value,opened:!0}),o.open(!1),r=t.swiper.create({el:".onboarding .swiper-container",observer:!0,observeParents:!0,speed:600,pagination:{el:".onboarding .swiper-pagination"}}))})),a((()=>{o&&o.destroy(),l()}));const c=()=>{r.slideNext()},d=()=>{t.popup.close(".popup-onboarding",!0),localStorage.onboardingFinished=!0};return()=>n?y("div",{class:"popup popup-onboarding onboarding popup-tablet-fullscreen modal-in",onPopupClosed:l},y("div",{class:"swiper-container"},y("div",{class:"swiper-pagination"}),y("div",{class:"swiper-wrapper"},y("div",{class:"swiper-slide"},y("div",{class:"onboarding-content"},y("div",{class:"onboarding-image"},y("img",{src:"images/logo.png"}),y("img",{src:V.SLIDES[0].image})),y("div",{class:"onboarding-title"},V.SLIDES[0].title),y("div",{class:"onboarding-text"},V.SLIDES[0].text),y("div",{class:"onboarding-next"},y("a",{href:"#",class:"button button-large button-round button-fill",onClick:c},V.TITLE)))),y("div",{class:"swiper-slide"},y("div",{class:"onboarding-content"},y("div",{class:"onboarding-image"},y("img",{src:V.SLIDES[1].image})),y("div",{class:"onboarding-title"},V.SLIDES[1].title),y("div",{class:"onboarding-text"},V.SLIDES[1].text),y("div",{class:"onboarding-next"},y("a",{href:"#",class:"button button-large button-round button-fill",onClick:d},V.TITLE))))))):y("div",null)}var H={JSON2CSV:function(){function e(e=[]){return(t=[])=>{const s=e.map((e=>`"${e}"`)).join(",");return t.reduce(((t,s)=>`${t}\n${(t=>e.map((e=>`"${((e,t,s={},i=".")=>t.split(i).reduce(((e,t)=>e&&e.hasOwnProperty(t)?e[t]:s),e))(t,e,"")}"`)).join(","))(s)}`.trim()),s)}}return console.log("LOADED json2csv..."),function(t){const s=e(["id","lat","lon","tags.name","tags.route_ref"])(t);console.log("csvdings",s)}}};const J=new c({name:"B√ºrgerbus Bad Bevensen",theme:"auto",el:"#app",component:()=>()=>y("div",{id:"app"},y("div",{class:"view view-main view-init","data-url":"/"}),y(Z,null)),autoDarkTheme:!0,test:Date.now(),store:W,routes:q,darkMode:"auto",serviceWorker:{path:"/service-worker.js"},on:{init(){I("html").hasClass("theme-dark")||I('meta[name="theme-color"').attr("content","#ee6633")}}});J.methods=H,console.log("app",J,"methods",H),window.F7=J;export{K as f};
