import{$ as e}from"./vendor.f3ceb474.js";function t(t,{$f7:i,$theme:a,$store:s,$el:n}){var o,l,r,c;const p=e=>e?e.split("\n").map((e=>e.trim())).join("<br />"):"",{item:d}=t,{cart:m,showCart:g}=s.getters,u=()=>{const{scrollTop:e}=n.value.find(".page-content")[0],t=1+e/375*.15;n.value.find(".item-page-header img").css({transform:`scale(${t})`})},f=()=>{s.dispatch("addToCart",{item:d}),i.toast.create({text:`${d.title} hinzugefügt`,destroyOnClose:!0,closeTimeout:2e3,horizontalPosition:"center",position:"center",icon:a.ios?'<i class="icon f7-icons">cart_fill_badge_plus</i>':'<i class="icon material-icons">add_shopping_cart</i>'}).open()};console.log("item.f7.jsx",d);let v=!1;if(d.id-1e9>0){d.title=null==(o=d.tags)?void 0:o.name,d.moretext=null==(l=d.tags)?void 0:l.name,d.ingredients=null==(c=null==(r=d.tags)?void 0:r.route_ref)?void 0:c.split(";").map((e=>`Linie: ${e.trim()}`));const e=d.id,t=s.state.stopInfo.find((t=>t.osm_id==e));d.description=t?t.description:`Keine Beschreibung gefunden für ${e}`,console.log("found",e,t,s.state.stopInfo,d),v=!0,setTimeout((()=>{(e=>{const t=L.tileLayer("https://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png",{maxZoom:20,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'});var i=L.map("detailsMap",{layers:[t]}).setView([e.lat,e.lon],17);L.marker([e.lat,e.lon]).addTo(i).bindPopup(e.tags.name).openPopup()})(d)}),500)}return()=>{return e("div",{class:"popup xxpopup-push xxpopup-tablet-fullscreen","data-close-on-escape":"true"},e("div",{class:"view view-init"},e("div",{class:"page item-page"},e("div",{class:"navbar"},e("div",{class:"navbar-bg"}),e("div",{class:"navbar-inner"},e("div",{class:"title"},d.title),e("div",{class:"right"},e("a",{href:"#",class:"link icon-only popup-close"},e("i",{class:"icon f7-icons ios-only"},"xmark"),e("i",{class:"icon material-icons md-only"},"close"))))),g.value&&d.price&&e("div",{class:"fab fab-extended fab-center-bottom"},d.price&&m.value.filter((e=>e.item.id===d.id)).length>0?e("a",{key:"in-cart",href:"/cart/"},a.ios?e("i",{class:"icon f7-icons"},"cart_fill"):e("i",{class:"icon material-icons"},"shopping_cart"),e("span",{class:"fab-text"},e("span",null,"Zur Bestellung"))):e("a",{key:"add-to-cart",href:"#",onClick:f},e("span",{class:"fab-text"},e("span",null,"Zum Warenkorb"),e("span",null,("number"!=typeof(t=d.price)&&(t=Number(t)),t.toLocaleString("de-DE",{style:"currency",currency:"EUR"})))))),e("div",{class:"item-page-header",id:"detailsMap"},e("img",{src:d.image,onLoad:e=>e.target.classList.add("loaded")})),e("div",{class:"page-content",onPageScroll:u},e("div",{class:"item-page-content "+(v||d.image&&d.image.length?"with-image":"no-image")},d.ingredients&&e("div",{class:"block item-page-ingredients"},d.ingredients.map((t=>e("span",null,t)))),e("div",{class:"page-title"}),e("div",{class:"block item-page-description",innerHTML:p(d.description)},d.moretext&&e("div",{innerHTML:p(d.moretext)})))))));var t}}export{t as default};
